<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTable Example - Mabesi React Components</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Load library BEFORE Babel -->
    <script src="../dist/index.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="../dist/index.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 600;
        }

        .control-group select,
        .control-group button {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }

        .control-group button {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .control-group button:hover {
            background: #0056b3;
        }

        .table-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .info {
            margin-top: 20px;
            padding: 15px;
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }

        .info h3 {
            margin-top: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üìä DataTable Component</h1>
        <p class="subtitle">Demonstrating sorting, pagination, selection, and actions</p>

        <div id="root"></div>

        <div class="info">
            <h3>Features Demonstrated:</h3>
            <ul>
                <li>‚úÖ Sortable columns (click headers)</li>
                <li>‚úÖ Pagination with page size selector</li>
                <li>‚úÖ Row selection with checkboxes</li>
                <li>‚úÖ Custom action buttons per row</li>
                <li>‚úÖ Theme switching (4 themes)</li>
                <li>‚úÖ Language switching (EN/PT-BR)</li>
                <li>‚úÖ Responsive design (resize window)</li>
                <li>‚úÖ Loading and empty states</li>
            </ul>
        </div>
    </div>

    <script type="text/babel">
        const { useState } = React;
        const {
            DataTable,
            ThemeProvider,
            I18nProvider,
            useTheme,
            useI18n
        } = window.MabesiReactComponents;

        // Sample data
        const generateUsers = (count) => {
            const firstNames = ['John', 'Jane', 'Bob', 'Alice', 'Charlie', 'Diana', 'Eve', 'Frank'];
            const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis'];
            const departments = ['Engineering', 'Sales', 'Marketing', 'HR', 'Finance'];

            return Array.from({ length: count }, (_, i) => ({
                id: i + 1,
                name: `${firstNames[i % firstNames.length]} ${lastNames[i % lastNames.length]}`,
                email: `user${i + 1}@example.com`,
                department: departments[i % departments.length],
                salary: Math.floor(Math.random() * 100000) + 40000,
                joinDate: new Date(2020 + Math.floor(Math.random() * 4), Math.floor(Math.random() * 12), Math.floor(Math.random() * 28)).toLocaleDateString(),
                active: Math.random() > 0.3
            }));
        };

        function DataTableExample() {
            const { themeName, setTheme } = useTheme();
            const { locale, setLocale } = useI18n();
            const [data, setData] = useState(generateUsers(50));
            const [selectedRows, setSelectedRows] = useState([]);
            const [loading, setLoading] = useState(false);

            // Column definitions
            const columns = [
                {
                    id: 'id',
                    header: 'ID',
                    accessor: 'id',
                    width: '80px',
                    align: 'center'
                },
                {
                    id: 'name',
                    header: 'Name',
                    accessor: 'name',
                    sortable: true
                },
                {
                    id: 'email',
                    header: 'Email',
                    accessor: 'email',
                    sortable: true
                },
                {
                    id: 'department',
                    header: 'Department',
                    accessor: 'department',
                    sortable: true,
                    render: (value) => (
                        <span style={{
                            padding: '4px 8px',
                            borderRadius: '4px',
                            background: '#e7f3ff',
                            color: '#0066cc',
                            fontSize: '0.875rem'
                        }}>
                            {value}
                        </span>
                    )
                },
                {
                    id: 'salary',
                    header: 'Salary',
                    accessor: 'salary',
                    sortable: true,
                    align: 'right',
                    render: (value) => `$${value.toLocaleString()}`
                },
                {
                    id: 'joinDate',
                    header: 'Join Date',
                    accessor: 'joinDate',
                    sortable: true
                },
                {
                    id: 'status',
                    header: 'Status',
                    accessor: 'active',
                    render: (value) => (
                        <span style={{
                            padding: '4px 8px',
                            borderRadius: '12px',
                            background: value ? '#d4edda' : '#f8d7da',
                            color: value ? '#155724' : '#721c24',
                            fontSize: '0.875rem'
                        }}>
                            {value ? 'Active' : 'Inactive'}
                        </span>
                    )
                }
            ];

            // Row actions
            const actions = [
                {
                    label: 'Edit',
                    onClick: (row) => alert(`Editing ${row.name}`),
                },
                {
                    label: 'Delete',
                    onClick: (row) => {
                        if (confirm(`Delete ${row.name}?`)) {
                            setData(data.filter(d => d.id !== row.id));
                        }
                    },
                    className: 'delete-btn',
                    disabled: (row) => !row.active
                }
            ];

            const handleRefresh = () => {
                setLoading(true);
                setTimeout(() => {
                    setData(generateUsers(50));
                    setLoading(false);
                }, 1000);
            };

            const handleClearData = () => {
                setData([]);
            };

            const handleRestoreData = () => {
                setData(generateUsers(50));
            };

            return (
                <>
                    <div className="controls">
                        <div className="control-group">
                            <label>Theme:</label>
                            <select value={themeName} onChange={(e) => setTheme(e.target.value)}>
                                <option value="default">Default</option>
                                <option value="minimal">Minimal</option>
                                <option value="modern">Modern</option>
                                <option value="compact">Compact</option>
                            </select>
                        </div>

                        <div className="control-group">
                            <label>Language:</label>
                            <select value={locale} onChange={(e) => setLocale(e.target.value)}>
                                <option value="en">English</option>
                                <option value="pt-BR">Portugu√™s (BR)</option>
                            </select>
                        </div>

                        <div className="control-group">
                            <button onClick={handleRefresh}>üîÑ Refresh Data</button>
                            <button onClick={handleClearData}>üóëÔ∏è Clear Data</button>
                            {data.length === 0 && (
                                <button onClick={handleRestoreData}>‚Ü©Ô∏è Restore Data</button>
                            )}
                        </div>

                        {selectedRows.length > 0 && (
                            <div className="control-group">
                                <strong>{selectedRows.length} rows selected</strong>
                                <button onClick={() => setSelectedRows([])}>Clear Selection</button>
                            </div>
                        )}
                    </div>

                    <div className="table-container">
                        <DataTable
                            data={data}
                            columns={columns}
                            rowKey="id"
                            pagination={true}
                            pageSize={10}
                            pageSizeOptions={[5, 10, 25, 50]}
                            sortable={true}
                            selectable={true}
                            selectedRows={selectedRows}
                            onSelectionChange={setSelectedRows}
                            actions={actions}
                            loading={loading}
                            responsive={true}
                            striped={true}
                            hoverable={true}
                        />
                    </div>
                </>
            );
        }

        function App() {
            return (
                <ThemeProvider defaultTheme="modern">
                    <I18nProvider defaultLocale="en">
                        <DataTableExample />
                    </I18nProvider>
                </ThemeProvider>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>
```